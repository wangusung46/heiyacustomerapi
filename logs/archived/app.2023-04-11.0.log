2023-04-11 20:57:54,713 INFO com.heiya.mobileapi.HeiyaCustomerApplication [main] Starting HeiyaCustomerApplication on Khanza with PID 11712 (C:\Users\wangu\Documents\NetBeansProjects\heiyacustomerapi\target\classes started by wangu in C:\Users\wangu\Documents\NetBeansProjects\heiyacustomerapi)
2023-04-11 20:57:54,716 DEBUG com.heiya.mobileapi.HeiyaCustomerApplication [main] Running with Spring Boot v2.2.5.RELEASE, Spring v5.2.4.RELEASE
2023-04-11 20:57:54,716 INFO com.heiya.mobileapi.HeiyaCustomerApplication [main] No active profile set, falling back to default profiles: default
2023-04-11 20:57:56,365 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-04-11 20:57:56,654 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 273ms. Found 12 JPA repository interfaces.
2023-04-11 20:57:58,537 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8083 (http)
2023-04-11 20:57:58,784 INFO org.springframework.web.context.ContextLoader [main] Root WebApplicationContext: initialization completed in 3984 ms
2023-04-11 20:58:02,054 INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-04-11 20:58:03,618 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-04-11 20:58:04,928 INFO com.heiya.mobileapi.firebase.service.FCMInitializer [main] Firebase application has been initialized
2023-04-11 20:58:06,122 INFO com.heiya.mobileapi.config.SchedulerConfig [main] simpleJobTrigger
2023-04-11 20:58:06,164 INFO com.heiya.mobileapi.config.SchedulerConfig [main] 

>>>> Starting Jobs.... 


2023-04-11 20:58:06,515 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/v1/payment/xendit/status/callback'], []
2023-04-11 20:58:06,515 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/v1/payment/dana/status/callback'], []
2023-04-11 20:58:06,515 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/v1/payment/linkaja/status/callback'], []
2023-04-11 20:58:06,515 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/v1/payment/gopay/status/callback'], []
2023-04-11 20:58:06,616 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@797c67c, org.springframework.security.web.context.SecurityContextPersistenceFilter@79392584, org.springframework.security.web.header.HeaderWriterFilter@2286dfcd, org.springframework.security.web.authentication.logout.LogoutFilter@69b436a7, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@70e07ef8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1407b93f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@327ac23, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@31ce271c, org.springframework.security.web.session.SessionManagementFilter@453bbb9b, org.springframework.security.web.access.ExceptionTranslationFilter@64ba5a71, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7a4199e5]
2023-04-11 20:58:08,539 INFO org.springframework.scheduling.quartz.SchedulerFactoryBean [main] Starting Quartz Scheduler now
2023-04-11 20:58:08,566 INFO org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler [main] Initializing ExecutorService
2023-04-11 20:58:08,709 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8083 (http) with context path ''
2023-04-11 20:58:08,726 INFO com.heiya.mobileapi.HeiyaCustomerApplication [main] Started HeiyaCustomerApplication in 14.873 seconds (JVM running for 15.766)
2023-04-11 20:58:08,740 INFO com.heiya.mobileapi.HeiyaCustomerApplication [main] C:\Program Files\Java\jdk1.8.0_333\jre
2023-04-11 20:58:10,679 INFO com.heiya.mobileapi.ap2.service.AP2ServiceImpl [pay-thread1] ======== RESPONSE AP2ServiceImpl.getToken() - Ap2LoginResponse: Ap2LoginResponse(token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6IjE1MDAiLCJmdWxsbmFtZSI6IkFQSSBWZW5kaW5nIEluZG9uZXNpYSIsInVzZXJuYW1lIjoiYXBpLnZlbmRpbmdpbmRvIiwidGVuYW50X2lkIjoiIiwibGFzdF9sb2dpbiI6IjIwMjMtMDQtMTEgMjA6NTg6MDYiLCJjcmVhdGVkX2F0IjoiMjAyMi0wOC0xMSAwNToyNjoxOCIsInVwZGF0ZWRfYXQiOm51bGwsInRpbWUiOjE2ODEyMjE0ODZ9.EzvalSvHhCP-PPMbt6nGWBHaS6ffO8OIAli5jk8ps_M, status=true, message=Success login, ap2UserRequest=Ap2UserResponse(fullname=API Vending Indonesia, ap2StoreRequests=[Ap2StoreResponse(storeId=0ec30305df1acb98537a6dcb0e579185, airportCode=CGK, storeName=Vending Machine CGK, storeReference=null)], createdAt=2022-08-11 05:26:18, updatedAt=null))
2023-04-11 20:58:14,187 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-2] 

======== START PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 20:58:14,193 INFO com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-2] ======== START PushNotificationServiceImpl.sendPushNotificationWithOrderNo() with request : {"topic":"EXPIRE_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H","orderNo":"operator20230411121254805Z","customerName":"Riyad Kurniawan"}
2023-04-11 20:58:14,451 INFO com.heiya.mobileapi.firebase.service.FCMPaymentSettlementServiceImpl [heiyamobile-api-quartz-job_Worker-2] ======== START FCMService.sendMessageToToken() with request : {"title":"Your payment has been expired","message":"Hallo Riyad Kurniawan Your order Espresso Matcha expire on Apr 11, 2023 8:12:51 PM","topic":"EXPIRE_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H"}
2023-04-11 20:58:15,130 ERROR com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-2] com.google.firebase.messaging.FirebaseMessagingException: Requested entity was not found.
2023-04-11 20:58:15,130 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-2] ======== COMPLETED PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 20:58:15,130 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-2] 

======== START PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 20:58:15,130 INFO com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-2] ======== START PushNotificationServiceImpl.sendPushNotificationWithOrderNo() with request : {"topic":"EXPIRE_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H","orderNo":"operator20230411121254805Z","customerName":"Riyad Kurniawan"}
2023-04-11 20:58:15,353 INFO com.heiya.mobileapi.firebase.service.FCMPaymentSettlementServiceImpl [heiyamobile-api-quartz-job_Worker-2] ======== START FCMService.sendMessageToToken() with request : {"title":"Your payment has been expired","message":"Hallo Riyad Kurniawan Your order Espresso Matcha expire on Apr 11, 2023 8:12:51 PM","topic":"EXPIRE_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H"}
2023-04-11 20:58:15,644 ERROR com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-2] com.google.firebase.messaging.FirebaseMessagingException: Requested entity was not found.
2023-04-11 20:58:15,645 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-2] ======== COMPLETED PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 20:58:15,645 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-2] 

======== START PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 20:58:15,646 INFO com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-2] ======== START PushNotificationServiceImpl.sendPushNotificationWithOrderNo() with request : {"topic":"EXPIRE_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H","orderNo":"operator20230411121254805Z","customerName":"Riyad Kurniawan"}
2023-04-11 20:58:15,885 INFO com.heiya.mobileapi.firebase.service.FCMPaymentSettlementServiceImpl [heiyamobile-api-quartz-job_Worker-2] ======== START FCMService.sendMessageToToken() with request : {"title":"Your payment has been expired","message":"Hallo Riyad Kurniawan Your order Espresso Matcha expire on Apr 11, 2023 8:12:51 PM","topic":"EXPIRE_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H"}
2023-04-11 20:58:16,203 ERROR com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-2] com.google.firebase.messaging.FirebaseMessagingException: Requested entity was not found.
2023-04-11 20:58:16,203 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-2] ======== COMPLETED PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:00:33,627 INFO org.springframework.web.servlet.DispatcherServlet [http-nio-8083-exec-3] Initializing Servlet 'dispatcherServlet'
2023-04-11 21:00:33,641 INFO org.springframework.web.servlet.DispatcherServlet [http-nio-8083-exec-3] Completed initialization in 14 ms
2023-04-11 21:00:33,987 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-3] 

======== START PaymentController.doChargesEwalletPayment
2023-04-11 21:00:33,987 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-3] ======== START PaymentServiceImpl.chargeXenditPayment() with request : ChargePaymentDTORequest(externalId=, amount=100, phone=081248666660, channelType=xendit, ewalletType=ID_OVO, goodsId=18, tasteId=2, goodsProtocol=30, productName=Espresso Matcha, machineCode=516101190000)
2023-04-11 21:00:33,993 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-3] ======== REQUEST PaymentServiceImpl.chargeXenditPayment(): XENDIT REQUEST {"reference_id":null,"currency":null,"amount":null,"checkout_method":null,"channel_code":null,"channel_properties":null,"metadata":null}
2023-04-11 21:00:35,088 ERROR com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-3] 400 Bad Request: [{"error_code":"API_VALIDATION_ERROR","message":"Failed to validate the request, 5 errors occurred.","errors":[{"path":"body.reference_id","message":"Value is not nullable"},{"path":"body.currency","me... (580 bytes)]
org.springframework.web.client.HttpClientErrorException$BadRequest: 400 Bad Request: [{"error_code":"API_VALIDATION_ERROR","message":"Failed to validate the request, 5 errors occurred.","errors":[{"path":"body.reference_id","message":"Value is not nullable"},{"path":"body.currency","me... (580 bytes)]
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:101)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:170)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:112)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:782)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:740)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:674)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:583)
	at com.heiya.mobileapi.payment.service.PaymentServiceImpl.chargeXenditPayment(PaymentServiceImpl.java:513)
	at com.heiya.mobileapi.payment.controller.PaymentController.doChargesEwalletPayment(PaymentController.java:138)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:879)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:204)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1639)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
2023-04-11 21:00:35,090 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-3] ======== COMPLETED PaymentController.doChargesEwalletPayment XENDIT OVO
2023-04-11 21:01:16,483 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-6] 

======== START PaymentController.doChargesEwalletPayment
2023-04-11 21:01:16,484 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-6] ======== START PaymentServiceImpl.chargeXenditPayment() with request : ChargePaymentDTORequest(externalId=, amount=100, phone=081248666660, channelType=xendit, ewalletType=ID_OVO, goodsId=18, tasteId=2, goodsProtocol=30, productName=Espresso Matcha, machineCode=516101190000)
2023-04-11 21:01:16,485 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-6] ======== REQUEST PaymentServiceImpl.chargeXenditPayment(): XENDIT REQUEST {"reference_id":null,"currency":null,"amount":null,"checkout_method":null,"channel_code":null,"channel_properties":null,"metadata":null}
2023-04-11 21:01:54,829 ERROR com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-6] 400 Bad Request: [{"error_code":"API_VALIDATION_ERROR","message":"Failed to validate the request, 5 errors occurred.","errors":[{"path":"body.metadata","message":"Value is not nullable"},{"path":"body.reference_id","me... (580 bytes)]
org.springframework.web.client.HttpClientErrorException$BadRequest: 400 Bad Request: [{"error_code":"API_VALIDATION_ERROR","message":"Failed to validate the request, 5 errors occurred.","errors":[{"path":"body.metadata","message":"Value is not nullable"},{"path":"body.reference_id","me... (580 bytes)]
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:101)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:170)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:112)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:782)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:740)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:674)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:583)
	at com.heiya.mobileapi.payment.service.PaymentServiceImpl.chargeXenditPayment(PaymentServiceImpl.java:513)
	at com.heiya.mobileapi.payment.controller.PaymentController.doChargesEwalletPayment(PaymentController.java:138)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:879)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:204)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1639)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
2023-04-11 21:01:54,830 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-6] ======== COMPLETED PaymentController.doChargesEwalletPayment XENDIT OVO
2023-04-11 21:02:13,767 INFO com.heiya.mobileapi.HeiyaCustomerApplication [main] Starting HeiyaCustomerApplication on Khanza with PID 17256 (C:\Users\wangu\Documents\NetBeansProjects\heiyacustomerapi\target\classes started by wangu in C:\Users\wangu\Documents\NetBeansProjects\heiyacustomerapi)
2023-04-11 21:02:13,779 DEBUG com.heiya.mobileapi.HeiyaCustomerApplication [main] Running with Spring Boot v2.2.5.RELEASE, Spring v5.2.4.RELEASE
2023-04-11 21:02:13,779 INFO com.heiya.mobileapi.HeiyaCustomerApplication [main] No active profile set, falling back to default profiles: default
2023-04-11 21:02:15,208 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-04-11 21:02:15,469 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 246ms. Found 12 JPA repository interfaces.
2023-04-11 21:02:17,056 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8083 (http)
2023-04-11 21:02:17,284 INFO org.springframework.web.context.ContextLoader [main] Root WebApplicationContext: initialization completed in 3446 ms
2023-04-11 21:02:19,701 INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-04-11 21:02:20,883 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-04-11 21:02:21,578 INFO com.heiya.mobileapi.firebase.service.FCMInitializer [main] Firebase application has been initialized
2023-04-11 21:02:22,188 INFO com.heiya.mobileapi.config.SchedulerConfig [main] simpleJobTrigger
2023-04-11 21:02:22,210 INFO com.heiya.mobileapi.config.SchedulerConfig [main] 

>>>> Starting Jobs.... 


2023-04-11 21:02:22,393 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/v1/payment/xendit/status/callback'], []
2023-04-11 21:02:22,393 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/v1/payment/dana/status/callback'], []
2023-04-11 21:02:22,393 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/v1/payment/linkaja/status/callback'], []
2023-04-11 21:02:22,393 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/v1/payment/gopay/status/callback'], []
2023-04-11 21:02:22,449 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3e2ee637, org.springframework.security.web.context.SecurityContextPersistenceFilter@2aac60b, org.springframework.security.web.header.HeaderWriterFilter@157a2c86, org.springframework.security.web.authentication.logout.LogoutFilter@444720b7, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4823f4d0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@fdeec12, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7d453075, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@62d818c6, org.springframework.security.web.session.SessionManagementFilter@12115c28, org.springframework.security.web.access.ExceptionTranslationFilter@648c80cb, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6a9b8f33]
2023-04-11 21:02:23,583 INFO org.springframework.scheduling.quartz.SchedulerFactoryBean [main] Starting Quartz Scheduler now
2023-04-11 21:02:23,597 INFO org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler [main] Initializing ExecutorService
2023-04-11 21:02:23,646 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8083 (http) with context path ''
2023-04-11 21:02:23,650 INFO com.heiya.mobileapi.HeiyaCustomerApplication [main] Started HeiyaCustomerApplication in 10.571 seconds (JVM running for 11.31)
2023-04-11 21:02:23,653 INFO com.heiya.mobileapi.HeiyaCustomerApplication [main] C:\Program Files\Java\jdk1.8.0_333\jre
2023-04-11 21:02:24,788 INFO com.heiya.mobileapi.ap2.service.AP2ServiceImpl [pay-thread1] ======== RESPONSE AP2ServiceImpl.getToken() - Ap2LoginResponse: Ap2LoginResponse(token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6IjE1MDAiLCJmdWxsbmFtZSI6IkFQSSBWZW5kaW5nIEluZG9uZXNpYSIsInVzZXJuYW1lIjoiYXBpLnZlbmRpbmdpbmRvIiwidGVuYW50X2lkIjoiIiwibGFzdF9sb2dpbiI6IjIwMjMtMDQtMTEgMjE6MDI6MjAiLCJjcmVhdGVkX2F0IjoiMjAyMi0wOC0xMSAwNToyNjoxOCIsInVwZGF0ZWRfYXQiOm51bGwsInRpbWUiOjE2ODEyMjE3NDB9.IIkC94sQqMp-5qSDMGAxNBcC2X97NRZBVpz_aWggEZc, status=true, message=Success login, ap2UserRequest=Ap2UserResponse(fullname=API Vending Indonesia, ap2StoreRequests=[Ap2StoreResponse(storeId=0ec30305df1acb98537a6dcb0e579185, airportCode=CGK, storeName=Vending Machine CGK, storeReference=null)], createdAt=2022-08-11 05:26:18, updatedAt=null))
2023-04-11 21:02:29,013 INFO org.springframework.web.servlet.DispatcherServlet [http-nio-8083-exec-2] Initializing Servlet 'dispatcherServlet'
2023-04-11 21:02:29,029 INFO org.springframework.web.servlet.DispatcherServlet [http-nio-8083-exec-2] Completed initialization in 16 ms
2023-04-11 21:02:29,325 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-2] 

======== START PaymentController.doChargesEwalletPayment
2023-04-11 21:02:29,325 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-2] ======== START PaymentServiceImpl.chargeXenditPayment() with request : ChargePaymentDTORequest(externalId=, amount=100, phone=081248666660, channelType=xendit, ewalletType=ID_OVO, goodsId=18, tasteId=2, goodsProtocol=30, productName=Espresso Matcha, machineCode=516101190000)
2023-04-11 21:02:29,339 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-2] ======== REQUEST PaymentServiceImpl.chargeXenditPayment(): XENDIT REQUEST {"reference_id":"operator20230411140229328Z","currency":"IDR","amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 21:02:34,639 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-2] ======== RESPONSE PaymentServiceImpl.chargeXenditPayment() - XenditResponse: {"success":true,"resultCode":"200","resultMsg":"Xendit eWallet transaction is created","id":"ewc_27c137d0-7a71-4600-a0d0-1296b3713482","business_id":"5ee8bc676923a51923ce8524","reference_id":"operator20230411140229328Z","status":"PENDING","currency":"IDR","charge_amount":100,"capture_amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"phone":null,"actions":null,"is_redirect_required":false,"callback_url":"https://myheiya.id:8083/v1/payment/xendit/status/callback","created":"2023-04-11T14:02:30.243722Z","updated":"2023-04-11T14:02:30.243722Z","voided_at":null,"capture_now":"true","customer_id":null,"payment_method_id":null,"failure_code":null,"basket":null,"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 21:02:34,639 INFO com.heiya.mobileapi.product.service.ProductServiceImpl [http-nio-8083-exec-2] ======== START ProductServiceImpl.getProductDiscount()
2023-04-11 21:02:34,645 INFO com.heiya.mobileapi.product.service.ProductServiceImpl [http-nio-8083-exec-2] ======== END ProductServiceImpl.getProductDiscount() - No discount found for this product
2023-04-11 21:02:34,687 DEBUG com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-2] ======== RESPONSE PaymentServiceImpl.chargeXenditPayment() - BaseHWResponse: {"success":true,"resultCode":"200","resultMsg":"Xendit eWallet transaction is created","id":"ewc_27c137d0-7a71-4600-a0d0-1296b3713482","business_id":"5ee8bc676923a51923ce8524","reference_id":"operator20230411140229328Z","status":"PENDING","currency":"IDR","charge_amount":100,"capture_amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"phone":null,"actions":null,"is_redirect_required":false,"callback_url":"https://myheiya.id:8083/v1/payment/xendit/status/callback","created":"2023-04-11T14:02:30.243722Z","updated":"2023-04-11T14:02:30.243722Z","voided_at":null,"capture_now":"true","customer_id":null,"payment_method_id":null,"failure_code":null,"basket":null,"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 21:02:34,688 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-2] ======== COMPLETED PaymentController.doChargesEwalletPayment XENDIT OVO
2023-04-11 21:03:39,070 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-6] 

======== START PaymentController.doChargesEwalletPayment
2023-04-11 21:03:39,071 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-6] ======== START PaymentServiceImpl.chargeXenditPayment() with request : ChargePaymentDTORequest(externalId=, amount=100, phone=081248666660, channelType=xendit, ewalletType=ID_OVO, goodsId=18, tasteId=2, goodsProtocol=30, productName=Espresso Matcha, machineCode=516101190000)
2023-04-11 21:03:39,073 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-6] ======== REQUEST PaymentServiceImpl.chargeXenditPayment(): XENDIT REQUEST {"reference_id":"operator2023041114033973Z","currency":"IDR","amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 21:03:40,126 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-6] ======== RESPONSE PaymentServiceImpl.chargeXenditPayment() - XenditResponse: {"success":true,"resultCode":"200","resultMsg":"Xendit eWallet transaction is created","id":"ewc_d0b3a11e-4b10-4825-b085-5e93cd840821","business_id":"5ee8bc676923a51923ce8524","reference_id":"operator2023041114033973Z","status":"PENDING","currency":"IDR","charge_amount":100,"capture_amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"phone":null,"actions":null,"is_redirect_required":false,"callback_url":"https://myheiya.id:8083/v1/payment/xendit/status/callback","created":"2023-04-11T14:03:35.720104Z","updated":"2023-04-11T14:03:35.720104Z","voided_at":null,"capture_now":"true","customer_id":null,"payment_method_id":null,"failure_code":null,"basket":null,"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 21:03:40,127 INFO com.heiya.mobileapi.product.service.ProductServiceImpl [http-nio-8083-exec-6] ======== START ProductServiceImpl.getProductDiscount()
2023-04-11 21:03:40,129 INFO com.heiya.mobileapi.product.service.ProductServiceImpl [http-nio-8083-exec-6] ======== END ProductServiceImpl.getProductDiscount() - No discount found for this product
2023-04-11 21:03:40,155 DEBUG com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-6] ======== RESPONSE PaymentServiceImpl.chargeXenditPayment() - BaseHWResponse: {"success":true,"resultCode":"200","resultMsg":"Xendit eWallet transaction is created","id":"ewc_d0b3a11e-4b10-4825-b085-5e93cd840821","business_id":"5ee8bc676923a51923ce8524","reference_id":"operator2023041114033973Z","status":"PENDING","currency":"IDR","charge_amount":100,"capture_amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"phone":null,"actions":null,"is_redirect_required":false,"callback_url":"https://myheiya.id:8083/v1/payment/xendit/status/callback","created":"2023-04-11T14:03:35.720104Z","updated":"2023-04-11T14:03:35.720104Z","voided_at":null,"capture_now":"true","customer_id":null,"payment_method_id":null,"failure_code":null,"basket":null,"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 21:03:40,156 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-6] ======== COMPLETED PaymentController.doChargesEwalletPayment XENDIT OVO
2023-04-11 21:47:21,749 INFO com.heiya.mobileapi.HeiyaCustomerApplication [main] Starting HeiyaCustomerApplication on Khanza with PID 11856 (C:\Users\wangu\Documents\NetBeansProjects\heiyacustomerapi\target\classes started by wangu in C:\Users\wangu\Documents\NetBeansProjects\heiyacustomerapi)
2023-04-11 21:47:21,755 DEBUG com.heiya.mobileapi.HeiyaCustomerApplication [main] Running with Spring Boot v2.2.5.RELEASE, Spring v5.2.4.RELEASE
2023-04-11 21:47:21,756 INFO com.heiya.mobileapi.HeiyaCustomerApplication [main] No active profile set, falling back to default profiles: default
2023-04-11 21:47:23,597 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-04-11 21:47:23,822 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 213ms. Found 12 JPA repository interfaces.
2023-04-11 21:47:25,331 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8083 (http)
2023-04-11 21:47:25,514 INFO org.springframework.web.context.ContextLoader [main] Root WebApplicationContext: initialization completed in 3619 ms
2023-04-11 21:47:27,510 INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-04-11 21:47:28,754 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-04-11 21:47:29,425 INFO com.heiya.mobileapi.firebase.service.FCMInitializer [main] Firebase application has been initialized
2023-04-11 21:47:30,064 INFO com.heiya.mobileapi.config.SchedulerConfig [main] simpleJobTrigger
2023-04-11 21:47:30,083 INFO com.heiya.mobileapi.config.SchedulerConfig [main] 

>>>> Starting Jobs.... 


2023-04-11 21:47:30,255 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/v1/payment/xendit/status/callback'], []
2023-04-11 21:47:30,255 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/v1/payment/dana/status/callback'], []
2023-04-11 21:47:30,255 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/v1/payment/linkaja/status/callback'], []
2023-04-11 21:47:30,255 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/v1/payment/gopay/status/callback'], []
2023-04-11 21:47:30,343 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3be60847, org.springframework.security.web.context.SecurityContextPersistenceFilter@5c3ad125, org.springframework.security.web.header.HeaderWriterFilter@6ae55678, org.springframework.security.web.authentication.logout.LogoutFilter@240fa4ad, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@14a488ed, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1deca369, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6ca9ec77, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@19ea65f4, org.springframework.security.web.session.SessionManagementFilter@6d3c80bf, org.springframework.security.web.access.ExceptionTranslationFilter@20e8286a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5367d46f]
2023-04-11 21:47:31,382 INFO org.springframework.scheduling.quartz.SchedulerFactoryBean [main] Starting Quartz Scheduler now
2023-04-11 21:47:31,395 INFO org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler [main] Initializing ExecutorService
2023-04-11 21:47:31,441 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8083 (http) with context path ''
2023-04-11 21:47:31,446 INFO com.heiya.mobileapi.HeiyaCustomerApplication [main] Started HeiyaCustomerApplication in 10.751 seconds (JVM running for 11.885)
2023-04-11 21:47:31,450 INFO com.heiya.mobileapi.HeiyaCustomerApplication [main] C:\Program Files\Java\jdk1.8.0_333\jre
2023-04-11 21:47:32,508 INFO com.heiya.mobileapi.ap2.service.AP2ServiceImpl [pay-thread1] ======== RESPONSE AP2ServiceImpl.getToken() - Ap2LoginResponse: Ap2LoginResponse(token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6IjE1MDAiLCJmdWxsbmFtZSI6IkFQSSBWZW5kaW5nIEluZG9uZXNpYSIsInVzZXJuYW1lIjoiYXBpLnZlbmRpbmdpbmRvIiwidGVuYW50X2lkIjoiIiwibGFzdF9sb2dpbiI6IjIwMjMtMDQtMTEgMjE6NDc6MjciLCJjcmVhdGVkX2F0IjoiMjAyMi0wOC0xMSAwNToyNjoxOCIsInVwZGF0ZWRfYXQiOm51bGwsInRpbWUiOjE2ODEyMjQ0NDd9.7FGjilkiQ6xko1K3M-JgQFN6GQ1yotdXFqYzjrgn-oM, status=true, message=Success login, ap2UserRequest=Ap2UserResponse(fullname=API Vending Indonesia, ap2StoreRequests=[Ap2StoreResponse(storeId=0ec30305df1acb98537a6dcb0e579185, airportCode=CGK, storeName=Vending Machine CGK, storeReference=null)], createdAt=2022-08-11 05:26:18, updatedAt=null))
2023-04-11 21:47:34,618 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] 

======== START PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:47:34,625 INFO com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START PushNotificationServiceImpl.sendPushNotificationWithOrderNo() with request : {"topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H","orderNo":"operator2023041114033973Z","customerName":"Riyad Kurniawan"}
2023-04-11 21:47:34,771 INFO com.heiya.mobileapi.firebase.service.FCMPaymentSettlementServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START FCMService.sendMessageToToken() with request : {"title":"Please pay your order","message":"Hallo Riyad Kurniawan Your order Espresso Matcha will expire on Apr 11, 2023 10:15:35 PM","topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H"}
2023-04-11 21:47:35,372 ERROR com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] com.google.firebase.messaging.FirebaseMessagingException: Requested entity was not found.
2023-04-11 21:47:35,372 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] ======== COMPLETED PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:47:35,373 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] 

======== START PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:47:35,373 INFO com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START PushNotificationServiceImpl.sendPushNotificationWithOrderNo() with request : {"topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H","orderNo":"operator2023041114033973Z","customerName":"Riyad Kurniawan"}
2023-04-11 21:47:35,536 INFO com.heiya.mobileapi.firebase.service.FCMPaymentSettlementServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START FCMService.sendMessageToToken() with request : {"title":"Please pay your order","message":"Hallo Riyad Kurniawan Your order Espresso Matcha will expire on Apr 11, 2023 10:15:35 PM","topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H"}
2023-04-11 21:47:35,799 ERROR com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] com.google.firebase.messaging.FirebaseMessagingException: Requested entity was not found.
2023-04-11 21:47:35,800 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] ======== COMPLETED PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:47:35,800 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] 

======== START PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:47:35,800 INFO com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START PushNotificationServiceImpl.sendPushNotificationWithOrderNo() with request : {"topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H","orderNo":"operator2023041114033973Z","customerName":"Riyad Kurniawan"}
2023-04-11 21:47:35,904 INFO com.heiya.mobileapi.firebase.service.FCMPaymentSettlementServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START FCMService.sendMessageToToken() with request : {"title":"Please pay your order","message":"Hallo Riyad Kurniawan Your order Espresso Matcha will expire on Apr 11, 2023 10:15:35 PM","topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H"}
2023-04-11 21:47:36,193 ERROR com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] com.google.firebase.messaging.FirebaseMessagingException: Requested entity was not found.
2023-04-11 21:47:36,194 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] ======== COMPLETED PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:47:36,194 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] 

======== START PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:47:36,194 INFO com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START PushNotificationServiceImpl.sendPushNotificationWithOrderNo() with request : {"topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H","orderNo":"operator2023041114033973Z","customerName":"Riyad Kurniawan"}
2023-04-11 21:47:36,320 INFO com.heiya.mobileapi.firebase.service.FCMPaymentSettlementServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START FCMService.sendMessageToToken() with request : {"title":"Please pay your order","message":"Hallo Riyad Kurniawan Your order Espresso Matcha will expire on Apr 11, 2023 10:15:35 PM","topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H"}
2023-04-11 21:47:36,609 ERROR com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] com.google.firebase.messaging.FirebaseMessagingException: Requested entity was not found.
2023-04-11 21:47:36,610 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] ======== COMPLETED PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:48:09,406 INFO org.springframework.web.servlet.DispatcherServlet [http-nio-8083-exec-2] Initializing Servlet 'dispatcherServlet'
2023-04-11 21:48:09,430 INFO org.springframework.web.servlet.DispatcherServlet [http-nio-8083-exec-2] Completed initialization in 23 ms
2023-04-11 21:48:09,715 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-2] 

======== START PaymentController.doChargesEwalletPayment
2023-04-11 21:48:09,716 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-2] ======== START PaymentServiceImpl.chargeXenditPayment() with request : ChargePaymentDTORequest(externalId=, amount=100, phone=081248666660, channelType=xendit, ewalletType=ID_OVO, goodsId=18, tasteId=2, goodsProtocol=30, productName=Espresso Matcha, machineCode=516101190000)
2023-04-11 21:48:09,727 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-2] ======== REQUEST PaymentServiceImpl.chargeXenditPayment(): XENDIT REQUEST {"reference_id":"operator20230411144809718Z","currency":"IDR","amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 21:48:10,838 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-2] ======== RESPONSE PaymentServiceImpl.chargeXenditPayment() - XenditResponse: {"success":true,"resultCode":"200","resultMsg":"Xendit eWallet transaction is created","id":"ewc_e28ee5ce-f3ed-47b7-8331-462fd88017fc","business_id":"5ee8bc676923a51923ce8524","reference_id":"operator20230411144809718Z","status":"PENDING","currency":"IDR","charge_amount":100,"capture_amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"phone":null,"actions":null,"is_redirect_required":false,"callback_url":"https://myheiya.id:8083/v1/payment/xendit/status/callback","created":"2023-04-11T14:48:06.01314Z","updated":"2023-04-11T14:48:06.01314Z","voided_at":null,"capture_now":"true","customer_id":null,"payment_method_id":null,"failure_code":null,"basket":null,"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 21:48:10,838 INFO com.heiya.mobileapi.product.service.ProductServiceImpl [http-nio-8083-exec-2] ======== START ProductServiceImpl.getProductDiscount()
2023-04-11 21:48:10,842 INFO com.heiya.mobileapi.product.service.ProductServiceImpl [http-nio-8083-exec-2] ======== END ProductServiceImpl.getProductDiscount() - No discount found for this product
2023-04-11 21:48:10,888 DEBUG com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-2] ======== RESPONSE PaymentServiceImpl.chargeXenditPayment() - BaseHWResponse: {"success":true,"resultCode":"200","resultMsg":"Xendit eWallet transaction is created","id":"ewc_e28ee5ce-f3ed-47b7-8331-462fd88017fc","business_id":"5ee8bc676923a51923ce8524","reference_id":"operator20230411144809718Z","status":"PENDING","currency":"IDR","charge_amount":100,"capture_amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"phone":null,"actions":null,"is_redirect_required":false,"callback_url":"https://myheiya.id:8083/v1/payment/xendit/status/callback","created":"2023-04-11T14:48:06.01314Z","updated":"2023-04-11T14:48:06.01314Z","voided_at":null,"capture_now":"true","customer_id":null,"payment_method_id":null,"failure_code":null,"basket":null,"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 21:48:10,888 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-2] ======== COMPLETED PaymentController.doChargesEwalletPayment XENDIT OVO
2023-04-11 21:49:08,725 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-3] 

======== START PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:49:08,726 INFO com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-3] ======== START PushNotificationServiceImpl.sendPushNotificationWithOrderNo() with request : {"topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H","orderNo":"operator20230411144809718Z","customerName":"Riyad Kurniawan"}
2023-04-11 21:49:08,832 INFO com.heiya.mobileapi.firebase.service.FCMPaymentSettlementServiceImpl [heiyamobile-api-quartz-job_Worker-3] ======== START FCMService.sendMessageToToken() with request : {"title":"Please pay your order","message":"Hallo Riyad Kurniawan Your order Espresso Matcha will expire on Apr 11, 2023 10:48:07 PM","topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H"}
2023-04-11 21:49:09,111 ERROR com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-3] com.google.firebase.messaging.FirebaseMessagingException: Requested entity was not found.
2023-04-11 21:49:09,111 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-3] ======== COMPLETED PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:49:24,874 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-4] 

======== START PaymentController.doChargesEwalletPayment
2023-04-11 21:49:24,875 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-4] ======== START PaymentServiceImpl.chargeXenditPayment() with request : ChargePaymentDTORequest(externalId=, amount=100, phone=081248666660, channelType=xendit, ewalletType=ID_OVO, goodsId=18, tasteId=2, goodsProtocol=30, productName=Espresso Matcha, machineCode=516101190000)
2023-04-11 21:49:24,881 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-4] ======== REQUEST PaymentServiceImpl.chargeXenditPayment(): XENDIT REQUEST {"reference_id":"operator20230411144924881Z","currency":"IDR","amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 21:49:25,996 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-4] ======== RESPONSE PaymentServiceImpl.chargeXenditPayment() - XenditResponse: {"success":true,"resultCode":"200","resultMsg":"Xendit eWallet transaction is created","id":"ewc_098c4886-aa08-48d8-8dca-a9ce3721ed77","business_id":"5ee8bc676923a51923ce8524","reference_id":"operator20230411144924881Z","status":"PENDING","currency":"IDR","charge_amount":100,"capture_amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"phone":null,"actions":null,"is_redirect_required":false,"callback_url":"https://myheiya.id:8083/v1/payment/xendit/status/callback","created":"2023-04-11T14:49:21.163529Z","updated":"2023-04-11T14:49:21.163529Z","voided_at":null,"capture_now":"true","customer_id":null,"payment_method_id":null,"failure_code":null,"basket":null,"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 21:49:25,996 INFO com.heiya.mobileapi.product.service.ProductServiceImpl [http-nio-8083-exec-4] ======== START ProductServiceImpl.getProductDiscount()
2023-04-11 21:49:25,997 INFO com.heiya.mobileapi.product.service.ProductServiceImpl [http-nio-8083-exec-4] ======== END ProductServiceImpl.getProductDiscount() - No discount found for this product
2023-04-11 21:49:26,003 DEBUG com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-4] ======== RESPONSE PaymentServiceImpl.chargeXenditPayment() - BaseHWResponse: {"success":true,"resultCode":"200","resultMsg":"Xendit eWallet transaction is created","id":"ewc_098c4886-aa08-48d8-8dca-a9ce3721ed77","business_id":"5ee8bc676923a51923ce8524","reference_id":"operator20230411144924881Z","status":"PENDING","currency":"IDR","charge_amount":100,"capture_amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"phone":null,"actions":null,"is_redirect_required":false,"callback_url":"https://myheiya.id:8083/v1/payment/xendit/status/callback","created":"2023-04-11T14:49:21.163529Z","updated":"2023-04-11T14:49:21.163529Z","voided_at":null,"capture_now":"true","customer_id":null,"payment_method_id":null,"failure_code":null,"basket":null,"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 21:49:26,004 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-4] ======== COMPLETED PaymentController.doChargesEwalletPayment XENDIT OVO
2023-04-11 21:53:05,851 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] 

======== START PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:53:05,852 INFO com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START PushNotificationServiceImpl.sendPushNotificationWithOrderNo() with request : {"topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H","orderNo":"operator20230411144924881Z","customerName":"Riyad Kurniawan"}
2023-04-11 21:53:05,952 INFO com.heiya.mobileapi.firebase.service.FCMPaymentSettlementServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START FCMService.sendMessageToToken() with request : {"title":"Please pay your order","message":"Hallo Riyad Kurniawan Your order Espresso Matcha will expire on Apr 11, 2023 10:52:04 PM","topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H"}
2023-04-11 21:53:06,239 ERROR com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] com.google.firebase.messaging.FirebaseMessagingException: Requested entity was not found.
2023-04-11 21:53:06,239 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] ======== COMPLETED PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:53:16,945 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-5] 

======== START PaymentController.doChargesEwalletPayment
2023-04-11 21:53:16,946 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-5] ======== START PaymentServiceImpl.chargeXenditPayment() with request : ChargePaymentDTORequest(externalId=, amount=100, phone=081248666660, channelType=xendit, ewalletType=ID_OVO, goodsId=18, tasteId=2, goodsProtocol=30, productName=Espresso Matcha, machineCode=516101190000)
2023-04-11 21:53:16,948 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-5] ======== REQUEST PaymentServiceImpl.chargeXenditPayment(): XENDIT REQUEST {"reference_id":"operator20230411145316948Z","currency":"IDR","amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 21:53:18,026 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-5] ======== RESPONSE PaymentServiceImpl.chargeXenditPayment() - XenditResponse: {"success":true,"resultCode":"200","resultMsg":"Xendit eWallet transaction is created","id":"ewc_8ba7dd4f-4bfa-428b-8b0d-01f24fdc409e","business_id":"5ee8bc676923a51923ce8524","reference_id":"operator20230411145316948Z","status":"PENDING","currency":"IDR","charge_amount":100,"capture_amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"phone":null,"actions":null,"is_redirect_required":false,"callback_url":"https://myheiya.id:8083/v1/payment/xendit/status/callback","created":"2023-04-11T14:53:13.170144Z","updated":"2023-04-11T14:53:13.170144Z","voided_at":null,"capture_now":"true","customer_id":null,"payment_method_id":null,"failure_code":null,"basket":null,"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 21:53:18,027 INFO com.heiya.mobileapi.product.service.ProductServiceImpl [http-nio-8083-exec-5] ======== START ProductServiceImpl.getProductDiscount()
2023-04-11 21:53:18,029 INFO com.heiya.mobileapi.product.service.ProductServiceImpl [http-nio-8083-exec-5] ======== END ProductServiceImpl.getProductDiscount() - No discount found for this product
2023-04-11 21:53:18,034 DEBUG com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-5] ======== RESPONSE PaymentServiceImpl.chargeXenditPayment() - BaseHWResponse: {"success":true,"resultCode":"200","resultMsg":"Xendit eWallet transaction is created","id":"ewc_8ba7dd4f-4bfa-428b-8b0d-01f24fdc409e","business_id":"5ee8bc676923a51923ce8524","reference_id":"operator20230411145316948Z","status":"PENDING","currency":"IDR","charge_amount":100,"capture_amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"phone":null,"actions":null,"is_redirect_required":false,"callback_url":"https://myheiya.id:8083/v1/payment/xendit/status/callback","created":"2023-04-11T14:53:13.170144Z","updated":"2023-04-11T14:53:13.170144Z","voided_at":null,"capture_now":"true","customer_id":null,"payment_method_id":null,"failure_code":null,"basket":null,"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 21:53:18,034 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-5] ======== COMPLETED PaymentController.doChargesEwalletPayment XENDIT OVO
2023-04-11 21:54:06,861 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] 

======== START PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:54:06,861 INFO com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START PushNotificationServiceImpl.sendPushNotificationWithOrderNo() with request : {"topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H","orderNo":"operator20230411144924881Z","customerName":"Riyad Kurniawan"}
2023-04-11 21:54:06,979 INFO com.heiya.mobileapi.firebase.service.FCMPaymentSettlementServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START FCMService.sendMessageToToken() with request : {"title":"Please pay your order","message":"Hallo Riyad Kurniawan Your order Espresso Matcha will expire on Apr 11, 2023 10:52:04 PM","topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H"}
2023-04-11 21:54:07,273 ERROR com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] com.google.firebase.messaging.FirebaseMessagingException: Requested entity was not found.
2023-04-11 21:54:07,273 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] ======== COMPLETED PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:57:03,994 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-2] 

======== START PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:57:03,994 INFO com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-2] ======== START PushNotificationServiceImpl.sendPushNotificationWithOrderNo() with request : {"topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H","orderNo":"operator20230411145316948Z","customerName":"Riyad Kurniawan"}
2023-04-11 21:57:04,091 INFO com.heiya.mobileapi.firebase.service.FCMPaymentSettlementServiceImpl [heiyamobile-api-quartz-job_Worker-2] ======== START FCMService.sendMessageToToken() with request : {"title":"Please pay your order","message":"Hallo Riyad Kurniawan Your order Espresso Matcha will expire on Apr 11, 2023 10:56:03 PM","topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H"}
2023-04-11 21:57:04,443 ERROR com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-2] com.google.firebase.messaging.FirebaseMessagingException: Requested entity was not found.
2023-04-11 21:57:04,444 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-2] ======== COMPLETED PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:58:03,816 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-2] 

======== START PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 21:58:03,817 INFO com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-2] ======== START PushNotificationServiceImpl.sendPushNotificationWithOrderNo() with request : {"topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H","orderNo":"operator20230411145316948Z","customerName":"Riyad Kurniawan"}
2023-04-11 21:58:03,915 INFO com.heiya.mobileapi.firebase.service.FCMPaymentSettlementServiceImpl [heiyamobile-api-quartz-job_Worker-2] ======== START FCMService.sendMessageToToken() with request : {"title":"Please pay your order","message":"Hallo Riyad Kurniawan Your order Espresso Matcha will expire on Apr 11, 2023 10:56:03 PM","topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H"}
2023-04-11 21:58:04,220 ERROR com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-2] com.google.firebase.messaging.FirebaseMessagingException: Requested entity was not found.
2023-04-11 21:58:04,220 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-2] ======== COMPLETED PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 22:00:37,547 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-8] 

======== START PaymentController.doChargesEwalletPayment
2023-04-11 22:00:37,548 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-8] ======== START PaymentServiceImpl.chargeXenditPayment() with request : ChargePaymentDTORequest(externalId=, amount=100, phone=081248666660, channelType=xendit, ewalletType=ID_DANA, goodsId=18, tasteId=2, goodsProtocol=30, productName=Espresso Matcha, machineCode=516101190000)
2023-04-11 22:00:37,554 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-8] ======== REQUEST PaymentServiceImpl.chargeXenditPayment(): XENDIT REQUEST {"reference_id":"operator20230411150037549Z","currency":"IDR","amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_DANA","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 22:00:39,139 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-8] ======== RESPONSE PaymentServiceImpl.chargeXenditPayment() - XenditResponse: {"success":true,"resultCode":"200","resultMsg":"Xendit eWallet transaction is created","id":"ewc_3d9580f1-4a8e-4443-bc22-6068ce8584ec","business_id":"5ee8bc676923a51923ce8524","reference_id":"operator20230411150037549Z","status":"PENDING","currency":"IDR","charge_amount":100,"capture_amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_DANA","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"phone":null,"actions":{"desktop_web_checkout_url":"https://m.dana.id/m/portal/cashier/checkout?bizNo=20230411111212800110166849277851233&timestamp=1681225234066&mid=216620000035833566172&did=216650000211517960174&sid=216660000211485681177&sign=RnJ%2BWy5moWMC910wqbEJ12oDTf03qJ%2B12NZPP6tX0CKa7qOVj0GGFtiTYqf7%2BYyKZ%2BwqzKCtQywd3vZuGE4UWrLQ52ur6JN3ABwRPCdfWXxM05qXUhalYwRz%2BMNsHnhbQjzv5RBbExIfTIMKR0DlUpCb8deZnbvXFzd4dpHwoUbNrVg0ifKSr%2BP%2B%2B7GQE3AKTShrAtAxozzYY88TmbPFe0AjUWX%2F4CLivyPBIiXvrCTWYKJwhvgK85bJ2L6EaqykoXjDoqUkEgIQtxV%2B%2F2%2BTHuEdemHuO4O%2Bl7Fb6TPTdZBo6zuwgrPZbbi5odrymutQLtxWh%2F0%2BT677Dm5GPVJqnA%3D%3D&forceToH5=false","mobile_web_checkout_url":"https://m.dana.id/m/portal/cashier/checkout?bizNo=20230411111212800110166849277851233&timestamp=1681225234066&mid=216620000035833566172&did=216650000211517960174&sid=216660000211485681177&sign=RnJ%2BWy5moWMC910wqbEJ12oDTf03qJ%2B12NZPP6tX0CKa7qOVj0GGFtiTYqf7%2BYyKZ%2BwqzKCtQywd3vZuGE4UWrLQ52ur6JN3ABwRPCdfWXxM05qXUhalYwRz%2BMNsHnhbQjzv5RBbExIfTIMKR0DlUpCb8deZnbvXFzd4dpHwoUbNrVg0ifKSr%2BP%2B%2B7GQE3AKTShrAtAxozzYY88TmbPFe0AjUWX%2F4CLivyPBIiXvrCTWYKJwhvgK85bJ2L6EaqykoXjDoqUkEgIQtxV%2B%2F2%2BTHuEdemHuO4O%2Bl7Fb6TPTdZBo6zuwgrPZbbi5odrymutQLtxWh%2F0%2BT677Dm5GPVJqnA%3D%3D&forceToH5=false","mobile_deeplink_checkout_url":null,"qr_checkout_string":null},"is_redirect_required":true,"callback_url":"https://myheiya.id:8083/v1/payment/xendit/status/callback","created":"2023-04-11T15:00:33.655191Z","updated":"2023-04-11T15:00:33.655191Z","voided_at":null,"capture_now":"true","customer_id":null,"payment_method_id":null,"failure_code":null,"basket":null,"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 22:00:39,142 INFO com.heiya.mobileapi.product.service.ProductServiceImpl [http-nio-8083-exec-8] ======== START ProductServiceImpl.getProductDiscount()
2023-04-11 22:00:39,147 INFO com.heiya.mobileapi.product.service.ProductServiceImpl [http-nio-8083-exec-8] ======== END ProductServiceImpl.getProductDiscount() - No discount found for this product
2023-04-11 22:00:39,165 DEBUG com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-8] ======== RESPONSE PaymentServiceImpl.chargeXenditPayment() - BaseHWResponse: {"success":true,"resultCode":"200","resultMsg":"Xendit eWallet transaction is created","id":"ewc_3d9580f1-4a8e-4443-bc22-6068ce8584ec","business_id":"5ee8bc676923a51923ce8524","reference_id":"operator20230411150037549Z","status":"PENDING","currency":"IDR","charge_amount":100,"capture_amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_DANA","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"phone":null,"actions":{"desktop_web_checkout_url":"https://m.dana.id/m/portal/cashier/checkout?bizNo=20230411111212800110166849277851233&timestamp=1681225234066&mid=216620000035833566172&did=216650000211517960174&sid=216660000211485681177&sign=RnJ%2BWy5moWMC910wqbEJ12oDTf03qJ%2B12NZPP6tX0CKa7qOVj0GGFtiTYqf7%2BYyKZ%2BwqzKCtQywd3vZuGE4UWrLQ52ur6JN3ABwRPCdfWXxM05qXUhalYwRz%2BMNsHnhbQjzv5RBbExIfTIMKR0DlUpCb8deZnbvXFzd4dpHwoUbNrVg0ifKSr%2BP%2B%2B7GQE3AKTShrAtAxozzYY88TmbPFe0AjUWX%2F4CLivyPBIiXvrCTWYKJwhvgK85bJ2L6EaqykoXjDoqUkEgIQtxV%2B%2F2%2BTHuEdemHuO4O%2Bl7Fb6TPTdZBo6zuwgrPZbbi5odrymutQLtxWh%2F0%2BT677Dm5GPVJqnA%3D%3D&forceToH5=false","mobile_web_checkout_url":"https://m.dana.id/m/portal/cashier/checkout?bizNo=20230411111212800110166849277851233&timestamp=1681225234066&mid=216620000035833566172&did=216650000211517960174&sid=216660000211485681177&sign=RnJ%2BWy5moWMC910wqbEJ12oDTf03qJ%2B12NZPP6tX0CKa7qOVj0GGFtiTYqf7%2BYyKZ%2BwqzKCtQywd3vZuGE4UWrLQ52ur6JN3ABwRPCdfWXxM05qXUhalYwRz%2BMNsHnhbQjzv5RBbExIfTIMKR0DlUpCb8deZnbvXFzd4dpHwoUbNrVg0ifKSr%2BP%2B%2B7GQE3AKTShrAtAxozzYY88TmbPFe0AjUWX%2F4CLivyPBIiXvrCTWYKJwhvgK85bJ2L6EaqykoXjDoqUkEgIQtxV%2B%2F2%2BTHuEdemHuO4O%2Bl7Fb6TPTdZBo6zuwgrPZbbi5odrymutQLtxWh%2F0%2BT677Dm5GPVJqnA%3D%3D&forceToH5=false","mobile_deeplink_checkout_url":null,"qr_checkout_string":null},"is_redirect_required":true,"callback_url":"https://myheiya.id:8083/v1/payment/xendit/status/callback","created":"2023-04-11T15:00:33.655191Z","updated":"2023-04-11T15:00:33.655191Z","voided_at":null,"capture_now":"true","customer_id":null,"payment_method_id":null,"failure_code":null,"basket":null,"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 22:00:39,166 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-8] ======== COMPLETED PaymentController.doChargesEwalletPayment XENDIT DANA
2023-04-11 22:11:10,459 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-10] 

======== START PaymentController.doChargesEwalletPayment
2023-04-11 22:11:10,465 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-10] ======== START PaymentServiceImpl.chargeXenditPayment() with request : ChargePaymentDTORequest(externalId=, amount=100, phone=081248666660, channelType=xendit, ewalletType=ID_OVO, goodsId=18, tasteId=2, goodsProtocol=30, productName=Espresso Matcha, machineCode=516101190000)
2023-04-11 22:11:10,470 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-10] ======== REQUEST PaymentServiceImpl.chargeXenditPayment(): XENDIT REQUEST {"reference_id":"operator20230411151110466Z","currency":"IDR","amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 22:14:27,823 INFO com.heiya.mobileapi.HeiyaCustomerApplication [main] Starting HeiyaCustomerApplication on Khanza with PID 17684 (C:\Users\wangu\Documents\NetBeansProjects\heiyacustomerapi\target\classes started by wangu in C:\Users\wangu\Documents\NetBeansProjects\heiyacustomerapi)
2023-04-11 22:14:27,828 DEBUG com.heiya.mobileapi.HeiyaCustomerApplication [main] Running with Spring Boot v2.2.5.RELEASE, Spring v5.2.4.RELEASE
2023-04-11 22:14:27,828 INFO com.heiya.mobileapi.HeiyaCustomerApplication [main] No active profile set, falling back to default profiles: default
2023-04-11 22:14:29,940 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-04-11 22:14:30,197 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 244ms. Found 12 JPA repository interfaces.
2023-04-11 22:14:31,825 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8083 (http)
2023-04-11 22:14:32,053 INFO org.springframework.web.context.ContextLoader [main] Root WebApplicationContext: initialization completed in 4154 ms
2023-04-11 22:14:34,344 INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-04-11 22:14:35,506 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-04-11 22:14:36,146 INFO com.heiya.mobileapi.firebase.service.FCMInitializer [main] Firebase application has been initialized
2023-04-11 22:14:36,738 INFO com.heiya.mobileapi.config.SchedulerConfig [main] simpleJobTrigger
2023-04-11 22:14:36,758 INFO com.heiya.mobileapi.config.SchedulerConfig [main] 

>>>> Starting Jobs.... 


2023-04-11 22:14:36,966 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/v1/payment/xendit/status/callback'], []
2023-04-11 22:14:36,966 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/v1/payment/dana/status/callback'], []
2023-04-11 22:14:36,966 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/v1/payment/linkaja/status/callback'], []
2023-04-11 22:14:36,966 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/v1/payment/gopay/status/callback'], []
2023-04-11 22:14:37,026 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@312e8eaf, org.springframework.security.web.context.SecurityContextPersistenceFilter@66be0e72, org.springframework.security.web.header.HeaderWriterFilter@2e778abb, org.springframework.security.web.authentication.logout.LogoutFilter@1bdb6b36, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5c438795, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@e09c7a2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@58a5b69c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5c960f64, org.springframework.security.web.session.SessionManagementFilter@6b6bae60, org.springframework.security.web.access.ExceptionTranslationFilter@7f065f9e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4eee730c]
2023-04-11 22:14:38,193 INFO org.springframework.scheduling.quartz.SchedulerFactoryBean [main] Starting Quartz Scheduler now
2023-04-11 22:14:38,210 INFO org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler [main] Initializing ExecutorService
2023-04-11 22:14:38,266 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8083 (http) with context path ''
2023-04-11 22:14:38,269 INFO com.heiya.mobileapi.HeiyaCustomerApplication [main] Started HeiyaCustomerApplication in 11.138 seconds (JVM running for 11.9)
2023-04-11 22:14:38,273 INFO com.heiya.mobileapi.HeiyaCustomerApplication [main] C:\Program Files\Java\jdk1.8.0_333\jre
2023-04-11 22:14:39,295 INFO com.heiya.mobileapi.ap2.service.AP2ServiceImpl [pay-thread1] ======== RESPONSE AP2ServiceImpl.getToken() - Ap2LoginResponse: Ap2LoginResponse(token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6IjE1MDAiLCJmdWxsbmFtZSI6IkFQSSBWZW5kaW5nIEluZG9uZXNpYSIsInVzZXJuYW1lIjoiYXBpLnZlbmRpbmdpbmRvIiwidGVuYW50X2lkIjoiIiwibGFzdF9sb2dpbiI6IjIwMjMtMDQtMTEgMjI6MTQ6MzQiLCJjcmVhdGVkX2F0IjoiMjAyMi0wOC0xMSAwNToyNjoxOCIsInVwZGF0ZWRfYXQiOm51bGwsInRpbWUiOjE2ODEyMjYwNzR9.PAaAKscsTvZ4WkZO9mqupE4E4S6aB7MCWJpgnf2DZjE, status=true, message=Success login, ap2UserRequest=Ap2UserResponse(fullname=API Vending Indonesia, ap2StoreRequests=[Ap2StoreResponse(storeId=0ec30305df1acb98537a6dcb0e579185, airportCode=CGK, storeName=Vending Machine CGK, storeReference=null)], createdAt=2022-08-11 05:26:18, updatedAt=null))
2023-04-11 22:14:44,874 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] 

======== START PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 22:14:44,879 INFO com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START PushNotificationServiceImpl.sendPushNotificationWithOrderNo() with request : {"topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H","orderNo":"operator20230411150037549Z","customerName":"Riyad Kurniawan"}
2023-04-11 22:14:45,015 INFO com.heiya.mobileapi.firebase.service.FCMPaymentSettlementServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START FCMService.sendMessageToToken() with request : {"title":"Please pay your order","message":"Hallo Riyad Kurniawan Your order Espresso Matcha will expire on Apr 11, 2023 11:11:28 PM","topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H"}
2023-04-11 22:14:45,541 ERROR com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] com.google.firebase.messaging.FirebaseMessagingException: Requested entity was not found.
2023-04-11 22:14:45,541 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] ======== COMPLETED PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 22:14:45,542 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] 

======== START PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 22:14:45,542 INFO com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START PushNotificationServiceImpl.sendPushNotificationWithOrderNo() with request : {"topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H","orderNo":"operator20230411150037549Z","customerName":"Riyad Kurniawan"}
2023-04-11 22:14:45,642 INFO com.heiya.mobileapi.firebase.service.FCMPaymentSettlementServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START FCMService.sendMessageToToken() with request : {"title":"Please pay your order","message":"Hallo Riyad Kurniawan Your order Espresso Matcha will expire on Apr 11, 2023 11:11:28 PM","topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H"}
2023-04-11 22:14:45,922 ERROR com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] com.google.firebase.messaging.FirebaseMessagingException: Requested entity was not found.
2023-04-11 22:14:45,923 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] ======== COMPLETED PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 22:14:45,923 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] 

======== START PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 22:14:45,923 INFO com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START PushNotificationServiceImpl.sendPushNotificationWithOrderNo() with request : {"topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H","orderNo":"operator20230411150037549Z","customerName":"Riyad Kurniawan"}
2023-04-11 22:14:46,031 INFO com.heiya.mobileapi.firebase.service.FCMPaymentSettlementServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START FCMService.sendMessageToToken() with request : {"title":"Please pay your order","message":"Hallo Riyad Kurniawan Your order Espresso Matcha will expire on Apr 11, 2023 11:11:28 PM","topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H"}
2023-04-11 22:14:46,275 ERROR com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] com.google.firebase.messaging.FirebaseMessagingException: Requested entity was not found.
2023-04-11 22:14:46,275 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] ======== COMPLETED PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 22:14:46,275 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] 

======== START PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 22:14:46,276 INFO com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START PushNotificationServiceImpl.sendPushNotificationWithOrderNo() with request : {"topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H","orderNo":"operator20230411150037549Z","customerName":"Riyad Kurniawan"}
2023-04-11 22:14:46,373 INFO com.heiya.mobileapi.firebase.service.FCMPaymentSettlementServiceImpl [heiyamobile-api-quartz-job_Worker-1] ======== START FCMService.sendMessageToToken() with request : {"title":"Please pay your order","message":"Hallo Riyad Kurniawan Your order Espresso Matcha will expire on Apr 11, 2023 11:11:28 PM","topic":"CHECK_PAYMENT","token":"dzNSFMN7btE:APA91bHb2LggJkLToIFcbF6HwkA4vjTAAPCRZp8wImQtNOykmqrtv-g0unhA3LYiyNlPyLQX-ZlxAXAQACNQGs1go0YIFUsadasxg4PLIFhDEHrw7TOUQ5UDuH5DWGC8xqB4s99rON_H"}
2023-04-11 22:14:46,675 ERROR com.heiya.mobileapi.firebase.service.PushNotificationServiceImpl [heiyamobile-api-quartz-job_Worker-1] com.google.firebase.messaging.FirebaseMessagingException: Requested entity was not found.
2023-04-11 22:14:46,675 INFO com.heiya.mobileapi.firebase.controller.PushNotificationController [heiyamobile-api-quartz-job_Worker-1] ======== COMPLETED PushNotificationController.doSendTokenCheckExpirePickup
2023-04-11 22:15:16,817 INFO org.springframework.web.servlet.DispatcherServlet [http-nio-8083-exec-2] Initializing Servlet 'dispatcherServlet'
2023-04-11 22:15:16,832 INFO org.springframework.web.servlet.DispatcherServlet [http-nio-8083-exec-2] Completed initialization in 15 ms
2023-04-11 22:15:17,123 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-2] 

======== START PaymentController.doChargesEwalletPayment
2023-04-11 22:15:17,124 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-2] ======== START PaymentServiceImpl.chargeXenditPayment() with request : ChargePaymentDTORequest(externalId=, amount=100, phone=081248666660, channelType=xendit, ewalletType=ID_OVO, goodsId=18, tasteId=2, goodsProtocol=30, productName=Espresso Matcha, machineCode=516101190000)
2023-04-11 22:15:17,135 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-2] ======== REQUEST PaymentServiceImpl.chargeXenditPayment(): XENDIT REQUEST {"reference_id":"operator20230411151517125Z","currency":"IDR","amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 22:15:25,754 INFO com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-2] ======== RESPONSE PaymentServiceImpl.chargeXenditPayment() - XenditResponse: {"success":true,"resultCode":"200","resultMsg":"Xendit eWallet transaction is created","id":"ewc_d521f209-4880-4d34-b71b-9e39841b91f1","business_id":"5ee8bc676923a51923ce8524","reference_id":"operator20230411151517125Z","status":"PENDING","currency":"IDR","charge_amount":100,"capture_amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"phone":null,"actions":null,"is_redirect_required":false,"callback_url":"https://myheiya.id:8083/v1/payment/xendit/status/callback","created":"2023-04-11T15:15:13.167982Z","updated":"2023-04-11T15:15:13.167982Z","voided_at":null,"capture_now":"true","customer_id":null,"payment_method_id":null,"failure_code":null,"basket":null,"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 22:15:25,754 INFO com.heiya.mobileapi.product.service.ProductServiceImpl [http-nio-8083-exec-2] ======== START ProductServiceImpl.getProductDiscount()
2023-04-11 22:15:25,760 INFO com.heiya.mobileapi.product.service.ProductServiceImpl [http-nio-8083-exec-2] ======== END ProductServiceImpl.getProductDiscount() - No discount found for this product
2023-04-11 22:15:25,807 DEBUG com.heiya.mobileapi.payment.service.PaymentServiceImpl [http-nio-8083-exec-2] ======== RESPONSE PaymentServiceImpl.chargeXenditPayment() - BaseHWResponse: {"success":true,"resultCode":"200","resultMsg":"Xendit eWallet transaction is created","id":"ewc_d521f209-4880-4d34-b71b-9e39841b91f1","business_id":"5ee8bc676923a51923ce8524","reference_id":"operator20230411151517125Z","status":"PENDING","currency":"IDR","charge_amount":100,"capture_amount":100,"checkout_method":"ONE_TIME_PAYMENT","channel_code":"ID_OVO","channel_properties":{"success_redirect_url":"http://myheiya.id/paymentsuccess","mobile_number":"+6281248666660","failure_redirect_url":"http://myheiya.id/paymentfailed"},"phone":null,"actions":null,"is_redirect_required":false,"callback_url":"https://myheiya.id:8083/v1/payment/xendit/status/callback","created":"2023-04-11T15:15:13.167982Z","updated":"2023-04-11T15:15:13.167982Z","voided_at":null,"capture_now":"true","customer_id":null,"payment_method_id":null,"failure_code":null,"basket":null,"metadata":{"branch_area":null,"branch_city":null,"branch_code":"tree_branch"}}
2023-04-11 22:15:25,807 INFO com.heiya.mobileapi.payment.controller.PaymentController [http-nio-8083-exec-2] ======== COMPLETED PaymentController.doChargesEwalletPayment XENDIT OVO
